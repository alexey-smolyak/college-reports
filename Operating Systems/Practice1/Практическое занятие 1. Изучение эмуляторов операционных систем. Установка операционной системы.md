##### Студенты: 
* Смоляк Алексей
* Авдошкин Кирилл
# Предусловие

В ходе данной практической работы, мы установим **Windows 10** в **Proxmox VE** запущенный в **Hyper-V** на хост машине с **Windows 11**.

По началу, идея может показатся "слегка" странной, но попробую поэтапно объяснить задумку.

* **Windows 10** - ну тут все просто, мало того, что так написано в задании, в данной версии не требуются танцы с бубном, чтобы эмулировать или "проксировать" в нативный TPM 2.0.

* **Proxmox VE** - здесь тоже все не очень сложно, **Proxmox** одна из наиболее популярных и простых Enterprise-Grade виртуальных сред, поэтому, взять её в качестве инструмента, на котором будет происходить обучение, наиболее оптимально и применимо, по сравнению с **VMWare Workstation** и уж тем более **VirtualBox**.

* **Hyper-V** - единственный (действительный) Type 1 гипервизор, который можно использовать с Windows 11 (если не считать дуал-бут или другие "Type 1.5" решения)
# Установка Proxmox VE в Hyper-V

1. Для начала включим **Hyper-V** в компонентах Windows на хост машине (потребуется перезагрузка), у меня уже включен, поэтому я пропущу данных шаг.

2. Откроем **Hyper-V Manager** через меню **Пуск**

![[Pasted image 20250404012508.png]]

3. Нажимаем по пользователю слева в проводнике и выбираем создать новую виртуальную машину

![[Pasted image 20250403232604.png]]

4. Нажимаем далее

![[Pasted image 20250403232626.png]]

5. Указываем название виратульной машины, я назову просто "Proxmox"

![[Pasted image 20250403232636.png]]

6. Выбираем **Generation 2** для лучшей поддержки и производительности.

![[Pasted image 20250403232701.png]]

7. Указываем базовое значение ОЗУ, оставляя включенной динамический режим.

![[Pasted image 20250403232935.png]]

8. Устанавливаем **Default Switch**

![[Pasted image 20250403232943.png]]

9. Здесь устанавливаем размер, у меня это 127 GB, но так же здесь можно установить, где будет хранится виратульный диск на хосте.

![[Pasted image 20250403232956.png]]

10. Здесь выбираем наш ISO-образ Proxmox VE, скачанный с [оффициального сайта](https://www.proxmox.com/en/downloads).

![[Pasted image 20250403233003.png]]

11. Нажимаем **"Finish"**

![[Pasted image 20250403233606.png]]

12. Если при запуске, виратульная машина сразу закрывается, скорее всего, нужно выключить **Secure Boot**.

![[Pasted image 20250403233102.png]]

13. Включаем нашу виртуалку с проксмоксом.

![[Pasted image 20250403233738.png]]

14. Здесь просто оставляем все по стандарту, лишь указывая данные для входа в **Web UI**

![[Pasted image 20250403234630.png]]

15. Для повышения произовдительности, можно включить вложенную виртуализацию.
# Установка Windows 10 в Proxmox

![[Pasted image 20250403234420.png]]

16. После успешной установки **Proxmox** и перехода в Web UI (https://172.29.225.250:8006), мы переходим к установке **Windows 10**

![[Pasted image 20250403235608.png]]

17. Так же, помимо образа винды, на понадобятся дополнительные драйверы, качаем их на офф. сайте Proxmox

![[Pasted image 20250403234851.png]]

18. Переходим в проводнике в хранилище (Local), нажимаем загрузить и по очереди загружаем наш образ и драйверы.

![[Pasted image 20250404000841.png]]

19. После успешной загрузки нажимаем сверху "Create VM"

![[Pasted image 20250404001001.png]]

20. Здесь просто меняем имя, я поставлю "win10"

![[Pasted image 20250404001008.png]]

21. В *ISO image* выбираем наш загруженный образ, остальные параметры можешь не трогать. 

![[Pasted image 20250404001043.png]]

22. Здесь тоже все оставляем по дефолту

![[Pasted image 20250404001119.png]]

23. Здесь мы можем указать размер, тип и другие параметры диска, я поставлю только размер - 64 ГБ

![[Pasted image 20250404001235.png]]

24. Рекомендую, здесь, поставить побольше ядер, и тип host, для максимальной производительности.

![[Pasted image 20250404001303.png]]

25. Тут тоже мало ставить не стоит, минимум 2 ГБ для **Windows 10** и 4 ГБ для **Windows 11**

![[Pasted image 20250404001329.png]]

26. Здесь я оставил по стандарту.

![[Pasted image 20250404001346.png]]

27. Нажимаем "Finish", убирая галочку с **Start when created**

![[Pasted image 20250404001425.png]]

28. Теперь нам нужно добавить скачанные нами драйвера. Нажимаем **Hardware > Add > CD/DVD Drive**

![[Pasted image 20250404001442.png]]

29. Выбираем загруженный нами образ с драйверами.

![[Pasted image 20250404001802.png]]

30. Запускаем виртуальную машину.

![[Pasted image 20250404002411.png]]

31. Здесь по желанию

![[Pasted image 20250404002421.png]]

32. Я выберу Pro, но это не принципиально.

![[Pasted image 20250404002517.png]]

33. Здесь выбираем второй вариант, чтобы у нас была возможность установить наши драйверы.

![[Pasted image 20250404002524.png]]

34. Нажимаем **"Загрузить"**

![[Pasted image 20250404002549.png]]

35. Выбираем **"Обзор"**

![[Pasted image 20250404002654.png]]

36. Выбираем **"CD > amd > w10"** и нажимаем **"OK"**
 
![[Pasted image 20250404002739.png]]

37. Все, продолжаем стандартный процесс установки.

![[Pasted image 20250404004507.png]]

38. Готово!