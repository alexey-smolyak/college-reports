##### Студенты: 
* Смоляк Алексей
* Авдошкин Кирилл
# Предусловие

В ходе данной практической работы, мы установим **Windows 10** в **Proxmox VE** запущенный в **Hyper-V** на хост машине с **Windows 11**.

По началу, идея может показатся "слегка" странной, но попробую поэтапно объяснить задумку.

* **Windows 10** - ну тут все просто, мало того, что так написано в задании, в данной версии не требуются танцы с бубном, чтобы эмулировать или "проксировать" в нативный TPM 2.0.

* **Proxmox VE** - здесь тоже все не очень сложно, **Proxmox** одна из наиболее популярных и простых Enterprise-Grade виртуальных сред, поэтому, взять её в качестве инструмента, на котором будет происходить обучение, наиболее оптимально и применимо, по сравнению с **VMWare Workstation** и уж тем более **VirtualBox**.

* **Hyper-V** - единственный (действительный) Type 1 гипервизор, который можно использовать с Windows 11 (если не считать дуал-бут или другие "Type 1.5" решения)
# Установка Proxmox VE в Hyper-V

1. Для начала включим **Hyper-V** в компонентах Windows на хост машине (потребуется перезагрузка), у меня уже включен, поэтому я пропущу данных шаг.

2. Откроем **Hyper-V Manager** через меню **Пуск**

![](images/img41.png)

3. Нажимаем по пользователю слева в проводнике и выбираем создать новую виртуальную машину

![](images/img1.png)

4. Нажимаем далее

![](images/img2.png)

5. Указываем название виратульной машины, я назову просто "Proxmox"

![](images/img3.png)

6. Выбираем **Generation 2** для лучшей поддержки и производительности.

![](images/img4.png)

7. Указываем базовое значение ОЗУ, оставляя включенной динамический режим.

![](images/img5.png)

8. Устанавливаем **Default Switch**

![](images/img6.png)

9. Здесь устанавливаем размер, у меня это 127 GB, но так же здесь можно установить, где будет хранится виратульный диск на хосте.

![](images/img7.png)

10. Здесь выбираем наш ISO-образ Proxmox VE, скачанный с [оффициального сайта](https://www.proxmox.com/en/downloads).

![](images/img9.png)

11. Нажимаем **"Finish"**

![](images/img10.png)

12. Если при запуске, виратульная машина сразу закрывается, скорее всего, нужно выключить **Secure Boot**.

![](images/img9.png)

13. Включаем нашу виртуалку с проксмоксом.

![](images/img11.png)

14. Здесь просто оставляем все по стандарту, лишь указывая данные для входа в **Web UI**

![](images/img13.png)

15. Для повышения произовдительности, можно включить вложенную виртуализацию.
# Установка Windows 10 в Proxmox

![](images/img12.png)

16. После успешной установки **Proxmox** и перехода в Web UI (https://172.29.225.250:8006), мы переходим к установке **Windows 10**

![](images/img17.png)

17. Так же, помимо образа винды, на понадобятся дополнительные драйверы, качаем их на офф. сайте Proxmox

![](images/img14.png)

18. Переходим в проводнике в хранилище (Local), нажимаем загрузить и по очереди загружаем наш образ и драйверы.

![](images/img18.png)

19. После успешной загрузки нажимаем сверху "Create VM"

![](images/img19.png)

20. Здесь просто меняем имя, я поставлю "win10"

![](images/img20.png)

21. В *ISO image* выбираем наш загруженный образ, остальные параметры можешь не трогать. 

![](images/img21.png)

22. Здесь тоже все оставляем по дефолту

![](images/img23.png)

23. Здесь мы можем указать размер, тип и другие параметры диска, я поставлю только размер - 64 ГБ

![](images/img24.png)

24. Рекомендую, здесь, поставить побольше ядер, и тип host, для максимальной производительности.

![](images/img25.png)

25. Тут тоже мало ставить не стоит, минимум 2 ГБ для **Windows 10** и 4 ГБ для **Windows 11**

![](images/img26.png)

26. Здесь я оставил по стандарту.

![](images/img27.png)

27. Нажимаем "Finish", убирая галочку с **Start when created**

![](images/img28.png)

28. Теперь нам нужно добавить скачанные нами драйвера. Нажимаем **Hardware > Add > CD/DVD Drive**

![](images/img29.png)

29. Выбираем загруженный нами образ с драйверами.

![](images/img30.png)

30. Запускаем виртуальную машину.

![](images/img31.png)

31. Здесь по желанию

![](images/img32.png)

32. Я выберу Pro, но это не принципиально.

![](images/img33.png)

33. Здесь выбираем второй вариант, чтобы у нас была возможность установить наши драйверы.

![](images/img35.png)

34. Нажимаем **"Загрузить"**

![](images/img36.png)

35. Выбираем **"Обзор"**

![](images/img38.png)

36. Выбираем **"CD > amd > w10"** и нажимаем **"OK"**
 
![](images/img39.png)

37. Все, продолжаем стандартный процесс установки.

![](images/img40.png)

38. Готово!